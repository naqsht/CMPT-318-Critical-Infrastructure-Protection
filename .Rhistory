else if(consumption_data$Date[ite]>=as.Date('2007/06/01')&&consumption_data$Date[ite]<=as.Date('2007/06/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2007/07/01')&&consumption_data$Date[ite]<=as.Date('2007/07/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2007/08/01')&&consumption_data$Date[ite]<=as.Date('2007/08/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2007/09/01')&&consumption_data$Date[ite]<=as.Date('2007/09/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2007/10/01')&&consumption_data$Date[ite]<=as.Date('2007/10/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2007/11/01')&&consumption_data$Date[ite]<=as.Date('2007/11/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2007/12/01')&&consumption_data$Date[ite]<=as.Date('2007/12/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2008/01/01')&&consumption_data$Date[ite]<=as.Date('2008/01/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2008/02/01')&&consumption_data$Date[ite]<=as.Date('2008/02/29'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2008/03/01')&&consumption_data$Date[ite]<=as.Date('2008/03/31'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2008/04/01')&&consumption_data$Date[ite]<=as.Date('2008/04/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2008/05/01')&&consumption_data$Date[ite]<=as.Date('2008/05/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2008/06/01')&&consumption_data$Date[ite]<=as.Date('2008/06/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2008/07/01')&&consumption_data$Date[ite]<=as.Date('2008/07/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2008/08/01')&&consumption_data$Date[ite]<=as.Date('2008/08/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2008/09/01')&&consumption_data$Date[ite]<=as.Date('2008/09/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2008/10/01')&&consumption_data$Date[ite]<=as.Date('2008/10/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2008/11/01')&&consumption_data$Date[ite]<=as.Date('2008/11/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2008/12/01')&&consumption_data$Date[ite]<=as.Date('2008/12/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2009/01/01')&&consumption_data$Date[ite]<=as.Date('2009/01/31'))
{
test_data_1_2_12<-rbind(consumption_data[ite,],test_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2009/02/01')&&consumption_data$Date[ite]<=as.Date('2009/02/28'))
{
test_data_1_2_12<-rbind(consumption_data[ite,],test_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2009/03/01')&&consumption_data$Date[ite]<=as.Date('2009/03/31'))
{
test_data_3_4_11<-rbind(consumption_data[ite,],test_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2009/04/01')&&consumption_data$Date[ite]<=as.Date('2009/04/30'))
{
test_data_3_4_11<-rbind(consumption_data[ite,],test_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2009/05/01')&&consumption_data$Date[ite]<=as.Date('2009/05/31'))
{
test_data_5_10<-rbind(consumption_data[ite,],test_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2009/06/01')&&consumption_data$Date[ite]<=as.Date('2009/06/30'))
{
test_data_6_9<-rbind(consumption_data[ite,],test_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2009/07/01')&&consumption_data$Date[ite]<=as.Date('2009/07/31'))
{
test_data_7_8<-rbind(consumption_data[ite,],test_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2009/08/01')&&consumption_data$Date[ite]<=as.Date('2009/08/31'))
{
test_data_7_8<-rbind(consumption_data[ite,],test_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2009/09/01')&&consumption_data$Date[ite]<=as.Date('2009/09/30'))
{
test_data_6_9<-rbind(consumption_data[ite,],test_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2009/10/01')&&consumption_data$Date[ite]<=as.Date('2009/10/31'))
{
test_data_5_10<-rbind(consumption_data[ite,],test_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2009/11/01')&&consumption_data$Date[ite]<=as.Date('2009/11/30'))
{
test_data_3_4_11<-rbind(consumption_data[ite,],test_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2009/12/01')&&consumption_data$Date[ite]<=as.Date('2009/12/31'))
{
test_data_1_2_12<-rbind(consumption_data[ite,],test_data_1_2_12)
}
ite = ite+1
}
consumption_data <- read.csv("data_without_NA.txt", header = TRUE, sep = ",", dec = ".")
ite<-1
consumption_data$Date<-as.Date(consumption_data$Date,format='%d/%m/%Y')
train_data_7_8<-data.frame()
train_data_6_9<-data.frame()
train_data_5_10<-data.frame()
train_data_3_4_11<-data.frame()
train_data_1_2_12<-data.frame()
test_data_7_8<-data.frame()
test_data_6_9<-data.frame()
test_data_5_10<-data.frame()
test_data_3_4_11<-data.frame()
test_data_1_2_12<-data.frame()
while(ite<nrow(consumption_data))
{
if(consumption_data$Date[ite]>=as.Date('2006/12/01')&&consumption_data$Date[ite]<=as.Date('2006/12/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
#print(train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2007/01/01')&&consumption_data$Date[ite]<=as.Date('2007/01/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2007/02/01')&&consumption_data$Date[ite]<=as.Date('2007/02/28'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2007/03/01')&&consumption_data$Date[ite]<=as.Date('2007/03/31'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2007/04/01')&&consumption_data$Date[ite]<=as.Date('2007/04/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2007/05/01')&&consumption_data$Date[ite]<=as.Date('2007/05/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2007/06/01')&&consumption_data$Date[ite]<=as.Date('2007/06/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2007/07/01')&&consumption_data$Date[ite]<=as.Date('2007/07/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2007/08/01')&&consumption_data$Date[ite]<=as.Date('2007/08/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2007/09/01')&&consumption_data$Date[ite]<=as.Date('2007/09/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2007/10/01')&&consumption_data$Date[ite]<=as.Date('2007/10/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2007/11/01')&&consumption_data$Date[ite]<=as.Date('2007/11/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2007/12/01')&&consumption_data$Date[ite]<=as.Date('2007/12/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2008/01/01')&&consumption_data$Date[ite]<=as.Date('2008/01/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2008/02/01')&&consumption_data$Date[ite]<=as.Date('2008/02/29'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2008/03/01')&&consumption_data$Date[ite]<=as.Date('2008/03/31'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2008/04/01')&&consumption_data$Date[ite]<=as.Date('2008/04/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2008/05/01')&&consumption_data$Date[ite]<=as.Date('2008/05/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2008/06/01')&&consumption_data$Date[ite]<=as.Date('2008/06/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2008/07/01')&&consumption_data$Date[ite]<=as.Date('2008/07/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2008/08/01')&&consumption_data$Date[ite]<=as.Date('2008/08/31'))
{
train_data_7_8<-rbind(consumption_data[ite,],train_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2008/09/01')&&consumption_data$Date[ite]<=as.Date('2008/09/30'))
{
train_data_6_9<-rbind(consumption_data[ite,],train_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2008/10/01')&&consumption_data$Date[ite]<=as.Date('2008/10/31'))
{
train_data_5_10<-rbind(consumption_data[ite,],train_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2008/11/01')&&consumption_data$Date[ite]<=as.Date('2008/11/30'))
{
train_data_3_4_11<-rbind(consumption_data[ite,],train_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2008/12/01')&&consumption_data$Date[ite]<=as.Date('2008/12/31'))
{
train_data_1_2_12<-rbind(consumption_data[ite,],train_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2009/01/01')&&consumption_data$Date[ite]<=as.Date('2009/01/31'))
{
test_data_1_2_12<-rbind(consumption_data[ite,],test_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2009/02/01')&&consumption_data$Date[ite]<=as.Date('2009/02/28'))
{
test_data_1_2_12<-rbind(consumption_data[ite,],test_data_1_2_12)
}
else if(consumption_data$Date[ite]>=as.Date('2009/03/01')&&consumption_data$Date[ite]<=as.Date('2009/03/31'))
{
test_data_3_4_11<-rbind(consumption_data[ite,],test_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2009/04/01')&&consumption_data$Date[ite]<=as.Date('2009/04/30'))
{
test_data_3_4_11<-rbind(consumption_data[ite,],test_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2009/05/01')&&consumption_data$Date[ite]<=as.Date('2009/05/31'))
{
test_data_5_10<-rbind(consumption_data[ite,],test_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2009/06/01')&&consumption_data$Date[ite]<=as.Date('2009/06/30'))
{
test_data_6_9<-rbind(consumption_data[ite,],test_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2009/07/01')&&consumption_data$Date[ite]<=as.Date('2009/07/31'))
{
test_data_7_8<-rbind(consumption_data[ite,],test_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2009/08/01')&&consumption_data$Date[ite]<=as.Date('2009/08/31'))
{
test_data_7_8<-rbind(consumption_data[ite,],test_data_7_8)
}
else if(consumption_data$Date[ite]>=as.Date('2009/09/01')&&consumption_data$Date[ite]<=as.Date('2009/09/30'))
{
test_data_6_9<-rbind(consumption_data[ite,],test_data_6_9)
}
else if(consumption_data$Date[ite]>=as.Date('2009/10/01')&&consumption_data$Date[ite]<=as.Date('2009/10/31'))
{
test_data_5_10<-rbind(consumption_data[ite,],test_data_5_10)
}
else if(consumption_data$Date[ite]>=as.Date('2009/11/01')&&consumption_data$Date[ite]<=as.Date('2009/11/30'))
{
test_data_3_4_11<-rbind(consumption_data[ite,],test_data_3_4_11)
}
else if(consumption_data$Date[ite]>=as.Date('2009/12/01')&&consumption_data$Date[ite]<=as.Date('2009/12/31'))
{
test_data_1_2_12<-rbind(consumption_data[ite,],test_data_1_2_12)
}
ite = ite+1
}
print(ite)
setwd('E:\\OneDrive - sfu.ca\\CMPT 318 Cyber Security\\318-g01-a1\\A3')
dataSet = read.table("Data_Assignment3.txt",sep = ",",blank.lines.skip = TRUE, header =  TRUE, dec=".")
dataSet<- na.omit(dataSet)
# Set the format for the weekdays
weekdays_date = strftime(dataSet$Date, format="%u")
dataSet$weekdays_num = as.integer(weekdays_date)
weekends = dataSet[dataSet$weekdays_num > 5,]
print(weekdays)
print(weekdays_date)
dataSet$weekdays_num = as.integer(weekdays_date)
print(dataset)
print(dataSet)
print(weekdays_date)
train_comsumtion_data<-consumption_data[consumption_data$Date < as.Date('2009/01/01'),]
print(train_comsumtion_data[nrow(train_comsumtion_data)])
print(train_comsumtion_data[nrow(train_comsumtion_data)-1])
print(nrow(train_comsumtion_data))
print(train_comsumtion_data[nrow(train_comsumtion_data),])
split(train_comsumtion_data, format(tab$Date, "%Y-%m"))
split(train_comsumtion_data, format(train_comsumtion_data$Date, "%Y-%m"))
train_comsumtion_data<-consumption_data[consumption_data$Date < as.Date('2009/01/01'),]
train_data_spring_weekday<-train_comsumtion_data[train_comsumtion_data$Date>=as.Date('2007/03/01')&&train_comsumtion_data$Date<=as.Date('2007/05/31')
,]
print(train_data_spring_weekday)
train_data_spring_weekday<-train_comsumtion_data[train_comsumtion_data$Date>=as.Date('2007/03/01')
,]
print(train_data_spring_weekday)
train_data_spring_weekday<-train_comsumtion_data[train_comsumtion_data$Date>=as.Date('2007/03/01')&train_comsumtion_data$Date<=as.Date('2007/05/31')
,]
print(train_data_spring_weekday)
weekdays_date = strftime(train_comsumtion_data$Date, format="%u")
train_comsumtion_data$weekdays_num = as.integer(weekdays_date)
train_data_spring_weekday<-train_comsumtion_data[((train_comsumtion_data$Date>=as.Date('2007/03/01')&train_comsumtion_data$Date<=as.Date('2007/05/31'))|
(train_comsumtion_data$Date>=as.Date('2008/03/01')&train_comsumtion_data$Date<=as.Date('2008/05/31')))&
train_comsumtion_data$weekdays_num<=5,]
print(train_data_spring_weekday)
print(train_data_spring_weekday[1000:1500,])
print(train_data_spring_weekday[5000:5100,])
print(train_data_spring_weekday[nrow(train_data_spring_weekday),])
consumption_data <- read.csv("data_without_NA.txt", header = TRUE, sep = ",", dec = ".")
consumption_data$Date<-as.Date(consumption_data$Date,format='%d/%m/%Y')
train_consumption_data<-consumption_data[consumption_data$Date < as.Date('2009/01/01'),]
weekdays_date = strftime(train_consumption_data$Date, format="%u")
train_consumption_data$weekdays_num = as.integer(weekdays_date)
train_data_spring_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/03/01')&train_consumption_data$Date<=as.Date('2007/05/31'))|
(train_consumption_data$Date>=as.Date('2008/03/01')&train_consumption_data$Date<=as.Date('2008/05/31')))&
train_consumption_data$weekdays_num<=5,]
#print(train_data_spring_weekday[nrow(train_data_spring_weekday),])
train_data_spring_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/03/01')&train_consumption_data$Date<=as.Date('2007/05/31'))|
(train_consumption_data$Date>=as.Date('2008/03/01')&train_consumption_data$Date<=as.Date('2008/05/31')))&
train_consumption_data$weekdays_num>5,]
train_data_summer_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/06/01')&train_consumption_data$Date<=as.Date('2007/08/31'))|
(train_consumption_data$Date>=as.Date('2008/06/01')&train_consumption_data$Date<=as.Date('2008/08/31')))&
train_consumption_data$weekdays_num<=5,]
train_data_summer_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/06/01')&train_consumption_data$Date<=as.Date('2007/08/31'))|
(train_consumption_data$Date>=as.Date('2008/06/01')&train_consumption_data$Date<=as.Date('2008/08/31')))&
train_consumption_data$weekdays_num>5,]
train_data_autumn_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/09/01')&train_consumption_data$Date<=as.Date('2007/11/30'))|
(train_consumption_data$Date>=as.Date('2008/09/01')&train_consumption_data$Date<=as.Date('2008/11/30')))&
train_consumption_data$weekdays_num<=5,]
train_data_autumn_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/09/01')&train_consumption_data$Date<=as.Date('2007/11/30'))|
(train_consumption_data$Date>=as.Date('2008/09/01')&train_consumption_data$Date<=as.Date('2008/11/30')))&
train_consumption_data$weekdays_num>5,]
train_data_wintor_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2006/12/01')&train_consumption_data$Date<=as.Date('2007/02/28'))|
(train_consumption_data$Date>=as.Date('2007/12/01')&train_consumption_data$Date<=as.Date('2008/02/29')))&
train_consumption_data$weekdays_num<=5,]
train_data_wintor_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2006/12/01')&train_consumption_data$Date<=as.Date('2007/02/28'))|
(train_consumption_data$Date>=as.Date('2007/12/01')&train_consumption_data$Date<=as.Date('2008/02/29')))&
train_consumption_data$weekdays_num>5,]
#data from 2009 as test data
test_consumption_data<-consumption_data[consumption_data$Date >= as.Date('2009/01/01'),]
weekdays_date = strftime(test_consumption_data$Date, format="%u")
test_consumption_data$weekdays_num = as.integer(weekdays_date)
test_data_spring_weekday<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/03/01')&test_consumption_data$Date<=as.Date('2009/05/31')
&test_consumption_data$weekdays_num<=5,]
test_data_spring_weekend<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/03/01')&test_consumption_data$Date<=as.Date('2009/05/31')
&test_consumption_data$weekdays_num>5,]
test_data_summer_weekday<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/06/01')&test_consumption_data$Date<=as.Date('2009/08/31')&
test_consumption_data$weekdays_num<=5,]
test_data_summer_weekend<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/06/01')&test_consumption_data$Date<=as.Date('2009/08/31')&
test_consumption_data$weekdays_num>5,]
test_data_autumn_weekday<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/09/01')&test_consumption_data$Date<=as.Date('2009/11/30')&
test_consumption_data$weekdays_num<=5,]
test_data_autumn_weekend<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/09/01')&test_consumption_data$Date<=as.Date('2009/11/30')&
test_consumption_data$weekdays_num>5,]
test_data_wintor_weekday<-test_consumption_data[((test_consumption_data$Date>=as.Date('2008/12/01')&test_consumption_data$Date<=as.Date('2009/02/28'))|
(test_consumption_data$Date>=as.Date('2009/12/01')))&
test_consumption_data$weekdays_num<=5,]
test_data_wintor_weekend<-test_consumption_data[((test_consumption_data$Date>=as.Date('2008/12/01')&test_consumption_data$Date<=as.Date('2009/02/28'))|
(test_consumption_data$Date>=as.Date('2009/12/01')))&
test_consumption_data$weekdays_num>5,]
#Parse training data
setwd('E:\\OneDrive - sfu.ca\\CMPT 318 Cyber Security\\cmpt318-project')
consumption_data <- read.csv("data_without_NA.txt", header = TRUE, sep = ",", dec = ".")
consumption_data$Date<-as.Date(consumption_data$Date,format='%d/%m/%Y')
train_consumption_data<-consumption_data[consumption_data$Date < as.Date('2009/01/01'),]
weekdays_date = strftime(train_consumption_data$Date, format="%u")
train_consumption_data$weekdays_num = as.integer(weekdays_date)
train_data_spring_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/03/01')&train_consumption_data$Date<=as.Date('2007/05/31'))|
(train_consumption_data$Date>=as.Date('2008/03/01')&train_consumption_data$Date<=as.Date('2008/05/31')))&
train_consumption_data$weekdays_num<=5,]
train_data_spring_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/03/01')&train_consumption_data$Date<=as.Date('2007/05/31'))|
(train_consumption_data$Date>=as.Date('2008/03/01')&train_consumption_data$Date<=as.Date('2008/05/31')))&
train_consumption_data$weekdays_num>5,]
train_data_summer_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/06/01')&train_consumption_data$Date<=as.Date('2007/08/31'))|
(train_consumption_data$Date>=as.Date('2008/06/01')&train_consumption_data$Date<=as.Date('2008/08/31')))&
train_consumption_data$weekdays_num<=5,]
train_data_summer_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/06/01')&train_consumption_data$Date<=as.Date('2007/08/31'))|
(train_consumption_data$Date>=as.Date('2008/06/01')&train_consumption_data$Date<=as.Date('2008/08/31')))&
train_consumption_data$weekdays_num>5,]
train_data_autumn_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/09/01')&train_consumption_data$Date<=as.Date('2007/11/30'))|
(train_consumption_data$Date>=as.Date('2008/09/01')&train_consumption_data$Date<=as.Date('2008/11/30')))&
train_consumption_data$weekdays_num<=5,]
train_data_autumn_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2007/09/01')&train_consumption_data$Date<=as.Date('2007/11/30'))|
(train_consumption_data$Date>=as.Date('2008/09/01')&train_consumption_data$Date<=as.Date('2008/11/30')))&
train_consumption_data$weekdays_num>5,]
train_data_wintor_weekday<-train_consumption_data[((train_consumption_data$Date>=as.Date('2006/12/01')&train_consumption_data$Date<=as.Date('2007/02/28'))|
(train_consumption_data$Date>=as.Date('2007/12/01')&train_consumption_data$Date<=as.Date('2008/02/29')))&
train_consumption_data$weekdays_num<=5,]
train_data_wintor_weekend<-train_consumption_data[((train_consumption_data$Date>=as.Date('2006/12/01')&train_consumption_data$Date<=as.Date('2007/02/28'))|
(train_consumption_data$Date>=as.Date('2007/12/01')&train_consumption_data$Date<=as.Date('2008/02/29')))&
train_consumption_data$weekdays_num>5,]
#data from 2009 as test data
test_consumption_data<-consumption_data[consumption_data$Date >= as.Date('2009/01/01'),]
weekdays_date = strftime(test_consumption_data$Date, format="%u")
test_consumption_data$weekdays_num = as.integer(weekdays_date)
test_data_spring_weekday<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/03/01')&test_consumption_data$Date<=as.Date('2009/05/31')
&test_consumption_data$weekdays_num<=5,]
test_data_spring_weekend<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/03/01')&test_consumption_data$Date<=as.Date('2009/05/31')
&test_consumption_data$weekdays_num>5,]
test_data_summer_weekday<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/06/01')&test_consumption_data$Date<=as.Date('2009/08/31')&
test_consumption_data$weekdays_num<=5,]
test_data_summer_weekend<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/06/01')&test_consumption_data$Date<=as.Date('2009/08/31')&
test_consumption_data$weekdays_num>5,]
test_data_autumn_weekday<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/09/01')&test_consumption_data$Date<=as.Date('2009/11/30')&
test_consumption_data$weekdays_num<=5,]
test_data_autumn_weekend<-test_consumption_data[test_consumption_data$Date>=as.Date('2009/09/01')&test_consumption_data$Date<=as.Date('2009/11/30')&
test_consumption_data$weekdays_num>5,]
test_data_wintor_weekday<-test_consumption_data[((test_consumption_data$Date>=as.Date('2008/12/01')&test_consumption_data$Date<=as.Date('2009/02/28'))|
(test_consumption_data$Date>=as.Date('2009/12/01')))&
test_consumption_data$weekdays_num<=5,]
test_data_wintor_weekend<-test_consumption_data[((test_consumption_data$Date>=as.Date('2008/12/01')&test_consumption_data$Date<=as.Date('2009/02/28'))|
(test_consumption_data$Date>=as.Date('2009/12/01')))&
test_consumption_data$weekdays_num>5,]
write.table(train_data_spring_weekday, "train_data_spring_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_spring_weekend, "train_data_spring_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_summer_weekday, "train_data_summer_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_summer_weekend, "train_data_summer_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_autumn_weekday, "train_data_autumn_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_autumn_weekend, "train_data_autumn_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_wintor_weekday, "train_data_wintor_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(train_data_wintor_weekend, "train_data_wintor_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_spring_weekday, "test_data_spring_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_spring_weekend, "test_data_spring_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_summer_weekday, "test_data_summer_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_summer_weekend, "test_data_summer_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_autumn_weekday, "test_data_autumn_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_autumn_weekend, "test_data_autumn_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_wintor_weekday, "test_data_wintor_weekday.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
write.table(test_data_wintor_weekend, "test_data_wintor_weekend.txt", append = FALSE, sep = ",", dec = ".",
row.names = TRUE, col.names = FALSE)
#features to train on
hmm_features<-list(Global_intensity~1,Voltage~1)
hmm_spring_weekday <- depmix(hmm_features, data=train_data_spring_weekday, nstates=4,ntimes=unlist(countLines(train_data_spring_weekday), use.names=FALSE),
family=list(gaussian(),gaussian()))
fhmm_spring_weekday <- fit(hmm_spring_weekday)
print(fhmm_spring_weekday)
hmm_spring_weekday_test <- depmix(hmm_features, data=test_data_spring_weekday, nstates=4, ntimes= unlist(countLines(test_data_spring_weekday), use.names=FALSE),
family=list(gaussian(),gaussian()))
hmm_spring_weekday_test <- setpars(hmm_spring_weekday_test,getpars(fhmm_spring_weekday))
logLik(hmm_spring_weekday_test)
library(lubridate)
library("depmixS4")
countLines <- function(data){
row_num <- nrow(data)
Dates<-data.frame(paste0(data[1:row_num, 1]))
current_date<-Dates[2,1]
lines_count <- list()
count<-1
for (i in 2:row_num)
{
if(Dates[i,1]==current_date)
{
count = count + 1
}
else
{
lines_count[[paste0(current_date)]]<-count
count=1
}
current_date = Dates[i,1]
}
lines_count[[paste0(Dates[row_num,1])]]<-count
return (lines_count)
}
set.seed(1)
hmm_spring_weekday <- depmix(hmm_features, data=train_data_spring_weekday, nstates=4,ntimes=unlist(countLines(train_data_spring_weekday), use.names=FALSE),
family=list(gaussian(),gaussian()))
fhmm_spring_weekday <- fit(hmm_spring_weekday)
print(fhmm_spring_weekday)
hmm_spring_weekday_test <- depmix(hmm_features, data=test_data_spring_weekday, nstates=4, ntimes= unlist(countLines(test_data_spring_weekday), use.names=FALSE),
family=list(gaussian(),gaussian()))
hmm_spring_weekday_test <- setpars(hmm_spring_weekday_test,getpars(fhmm_spring_weekday))
logLik(hmm_spring_weekday_test)
